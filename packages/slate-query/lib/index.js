/*! For license information please see index.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./lib",r(r.s=2)}([function(e,t,r){"use strict";(function(e){var n;r.d(t,"a",(function(){return ce})),r.d(t,"b",(function(){return fe})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return se}));var o,a,i="undefined"!=typeof Symbol,s="undefined"!=typeof Map,c="undefined"!=typeof Set,f=i?Symbol("immer-nothing"):((n={})["immer-nothing"]=!0,n),u=i?Symbol("immer-draftable"):"__$immer_draftable",l=i?Symbol("immer-state"):"__$immer_state",h=i?Symbol.iterator:"@@iterator",p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function d(e,t){function r(){this.constructor=e}p(e,t),e.prototype=(r.prototype=t.prototype,new r)}function v(e){return!!e&&!!e[l]}function g(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[u]||!!e.constructor[u]||P(e)||j(e))}!function(e){e[e.Object=0]="Object",e[e.Array=1]="Array",e[e.Map=2]="Map",e[e.Set=3]="Set"}(o||(o={})),function(e){e[e.ProxyObject=0]="ProxyObject",e[e.ProxyArray=1]="ProxyArray",e[e.ES5Object=2]="ES5Object",e[e.ES5Array=3]="ES5Array",e[e.Map=4]="Map",e[e.Set=5]="Set"}(a||(a={}));var y="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function m(e,t){b(e)===o.Object?y(e).forEach((function(r){return t(r,e[r],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function b(e){if(e||D(),e[l])switch(e[l].type){case a.ES5Object:case a.ProxyObject:return o.Object;case a.ES5Array:case a.ProxyArray:return o.Array;case a.Map:return o.Map;case a.Set:return o.Set}return Array.isArray(e)?o.Array:P(e)?o.Map:j(e)?o.Set:o.Object}function w(e,t){return b(e)===o.Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){return b(e)===o.Map?e.get(t):e[t]}function x(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function P(e){return s&&e instanceof Map}function j(e){return c&&e instanceof Set}function E(e){return e.copy||e.base}function F(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var r=Object.create(Object.getPrototypeOf(e));return y(e).forEach((function(n){if(n!==l){var o=Object.getOwnPropertyDescriptor(e,n),a=o.value;if(o.get){if(!t)throw new Error("Immer drafts cannot have computed properties");a=o.get.call(e)}o.enumerable?r[n]=a:Object.defineProperty(r,n,{value:a,writable:!0,configurable:!0})}})),r}function A(e,t){if(g(e)&&!v(e)&&!Object.isFrozen(e)){var r=b(e);r===o.Set?e.add=e.clear=e.delete=k:r===o.Map&&(e.set=e.clear=e.delete=k),Object.freeze(e),t&&m(e,(function(e,t){return A(t,!0)}))}}function k(){throw new Error("This object has been frozen and should not be mutated")}function D(){throw new Error("Illegal state, please file a bug")}var S=function(){function e(e,t){this.drafts=[],this.parent=e,this.immer=t,this.canAutoFreeze=!0}return e.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},e.prototype.revoke=function(){this.leave(),this.drafts.forEach(C),this.drafts=null},e.prototype.leave=function(){this===e.current&&(e.current=this.parent)},e.enter=function(t){var r=new e(e.current,t);return e.current=r,r},e}();function C(e){var t=e[l];t.type===a.ProxyObject||t.type===a.ProxyArray?t.revoke():t.revoked=!0}function _(e,t,r){var n=r.drafts[0],o=void 0!==t&&t!==n;if(e.willFinalize(r,t,o),o){if(n[l].modified)throw r.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");g(t)&&(t=N(e,t,r),r.parent||B(e,t)),r.patches&&(r.patches.push({op:"replace",path:[],value:t}),r.inversePatches.push({op:"replace",path:[],value:n[l].base}))}else t=N(e,n,r,[]);return r.revoke(),r.patches&&r.patchListener(r.patches,r.inversePatches),t!==f?t:void 0}function N(e,t,r,n){var o=t[l];if(!o)return Object.isFrozen(t)?t:T(e,t,r);if(o.scope!==r)return t;if(!o.modified)return B(e,o.base,!0),o.base;if(!o.finalized){if(o.finalized=!0,T(e,o.draft,r,n),e.onDelete&&o.type!==a.Set)if(e.useProxies){m(o.assigned,(function(t,r){r||e.onDelete(o,t)}))}else{var i=o.base,s=o.copy;m(i,(function(t){w(s,t)||e.onDelete(o,t)}))}e.onCopy&&e.onCopy(o),e.autoFreeze&&r.canAutoFreeze&&A(o.copy,!1),n&&r.patches&&function(e,t,r,n){switch(e.type){case a.ProxyObject:case a.ES5Object:case a.Map:return function(e,t,r,n){var o=e.base,a=e.copy;m(e.assigned,(function(e,i){var s=O(o,e),c=O(a,e),f=i?w(o,e)?"replace":"add":"remove";if(s!==c||"replace"!==f){var u=t.concat(e);r.push("remove"===f?{op:f,path:u}:{op:f,path:u,value:c}),n.push("add"===f?{op:"remove",path:u}:"remove"===f?{op:"add",path:u,value:s}:{op:"replace",path:u,value:s})}}))}(e,t,r,n);case a.ES5Array:case a.ProxyArray:return function(e,t,r,n){var o,a,i=e.base,s=e.assigned,c=e.copy;c||D();c.length<i.length&&(i=(o=[c,i])[0],c=o[1],r=(a=[n,r])[0],n=a[1]);var f=c.length-i.length,u=0;for(;i[u]===c[u]&&u<i.length;)++u;var l=i.length;for(;l>u&&i[l-1]===c[l+f-1];)--l;for(var h=u;h<l;++h)if(s[h]&&c[h]!==i[h]){var p=t.concat([h]);r.push({op:"replace",path:p,value:c[h]}),n.push({op:"replace",path:p,value:i[h]})}var d=r.length;for(h=l+f-1;h>=l;--h){p=t.concat([h]);r[d+h-l]={op:"add",path:p,value:c[h]},n.push({op:"remove",path:p})}}(e,t,r,n);case a.Set:(function(e,t,r,n){var o=e.base,a=e.copy,i=0;o.forEach((function(e){if(!a.has(e)){var o=t.concat([i]);r.push({op:"remove",path:o,value:e}),n.unshift({op:"add",path:o,value:e})}i++})),i=0,a.forEach((function(e){if(!o.has(e)){var a=t.concat([i]);r.push({op:"add",path:a,value:e}),n.unshift({op:"remove",path:a,value:e})}i++}))})(e,t,r,n)}}(o,n,r.patches,r.inversePatches)}return o.copy}function T(e,t,r,n){var i=t[l];return i&&(i.type!==a.ES5Object&&i.type!==a.ES5Array||(i.copy=F(i.draft,!0)),t=i.copy),m(t,(function(a,s){return function e(t,r,n,a,i,s,c,f){if(c===i)throw Error("Immer forbids circular references");var u=!!a&&i===n,l=j(i);if(v(c)){var h=f&&u&&!l&&!w(a.assigned,s)?f.concat(s):void 0;c=N(t,c,r,h),function(e,t,r){switch(b(e)){case o.Map:e.set(t,r);break;case o.Set:e.delete(t),e.add(r);break;default:e[t]=r}}(i,s,c),v(c)&&(r.canAutoFreeze=!1)}else{if(u&&x(c,O(a.base,s)))return;g(c)&&(m(c,(function(o,i){return e(t,r,n,a,c,o,i,f)})),r.parent||B(t,c))}u&&t.onAssign&&!l&&t.onAssign(a,s,c)}(e,r,t,i,t,a,s,n)})),t}function B(e,t,r){void 0===r&&(r=!1),e.autoFreeze&&!v(t)&&A(t,r)}var R={get:function(e,t){if(t===l)return e;var r=e.drafts;if(!e.modified&&w(r,t))return r[t];var n=E(e)[t];if(e.finalized||!g(n))return n;if(e.modified){if(n!==M(e.base,t))return n;r=e.copy}return r[t]=e.scope.immer.createProxy(n,e)},has:function(e,t){return t in E(e)},ownKeys:function(e){return Reflect.ownKeys(E(e))},set:function(e,t,r){if(!e.modified){var n=M(e.base,t);if(r?x(n,r)||r===e.drafts[t]:x(n,r)&&t in e.base)return!0;I(e),q(e)}return e.assigned[t]=!0,e.copy[t]=r,!0},deleteProperty:function(e,t){return void 0!==M(e.base,t)||t in e.base?(e.assigned[t]=!1,I(e),q(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var r=E(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&(n.writable=!0,n.configurable=e.type!==a.ProxyArray||"length"!==t),n},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},z={};function M(e,t){var r=e[l],n=Reflect.getOwnPropertyDescriptor(r?E(r):e,t);return n&&n.value}function q(e){if(!e.modified){if(e.modified=!0,e.type===a.ProxyObject||e.type===a.ProxyArray){var t=e.copy=F(e.base);m(e.drafts,(function(e,r){t[e]=r})),e.drafts=void 0}e.parent&&q(e.parent)}}function I(e){e.copy||(e.copy=F(e.base))}function W(e,t,r){e.drafts.forEach((function(e){e[l].finalizing=!0})),r?v(t)&&t[l].scope===e&&X(e.drafts):(e.patches&&function e(t){if(!t||"object"!=typeof t)return;var r=t[l];if(!r)return;var n=r.base,o=r.draft,i=r.assigned,s=r.type;if(s===a.ES5Object)m(o,(function(t){t!==l&&(void 0!==n[t]||w(n,t)?i[t]||e(o[t]):(i[t]=!0,J(r)))})),m(n,(function(e){void 0!==o[e]||w(o,e)||(i[e]=!1,J(r))}));else if(s===a.ES5Array){if(H(r)&&(J(r),i.length=!0),o.length<n.length)for(var c=o.length;c<n.length;c++)i[c]=!1;else for(c=n.length;c<o.length;c++)i[c]=!0;var f=Math.min(o.length,n.length);for(c=0;c<f;c++)void 0===i[c]&&e(o[c])}}(e.drafts[0]),X(e.drafts))}function L(e,t){var r=Array.isArray(e),n=K(e);m(n,(function(t){!function(e,t,r){var n=$[t];n?n.enumerable=r:$[t]=n={configurable:!0,enumerable:r,get:function(){return function(e,t){Z(e);var r=V(E(e),t);if(e.finalizing)return r;if(r===V(e.base,t)&&g(r))return U(e),e.copy[t]=e.scope.immer.createProxy(r,e);return r}(this[l],t)},set:function(e){!function(e,t,r){if(Z(e),e.assigned[t]=!0,!e.modified){if(x(r,V(E(e),t)))return;J(e),U(e)}e.copy[t]=r}(this[l],t,e)}};Object.defineProperty(e,t,n)}(n,t,r||function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(!r||!r.enumerable)}(e,t))}));var o,i,s,c={type:r?a.ES5Array:a.ES5Object,scope:t?t.scope:S.current,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:n,copy:null,revoked:!1,isManual:!1};return o=n,i=l,s=c,Object.defineProperty(o,i,{value:s,enumerable:!1,writable:!0}),n}function V(e,t){var r=e[l];if(r&&!r.finalizing){r.finalizing=!0;var n=e[t];return r.finalizing=!1,n}return e[t]}function J(e){e.modified||(e.modified=!0,e.parent&&J(e.parent))}function U(e){e.copy||(e.copy=K(e.base))}function K(e){var t=e&&e[l];if(t){t.finalizing=!0;var r=F(t.draft,!0);return t.finalizing=!1,r}return F(e)}m(R,(function(e,t){z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),z.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return R.deleteProperty.call(this,e[0],t)},z.set=function(e,t,r){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return R.set.call(this,e[0],t,r,e[0])};var $={};function Z(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(E(e)))}function X(e){for(var t=e.length-1;t>=0;t--){var r=e[t][l];if(!r.modified)switch(r.type){case a.ES5Array:H(r)&&J(r);break;case a.ES5Object:G(r)&&J(r)}}}function G(e){for(var t=e.base,r=e.draft,n=Object.keys(r),o=n.length-1;o>=0;o--){var a=n[o],i=t[a];if(void 0===i&&!w(t,a))return!0;var s=r[a],c=s&&s[l];if(c?c.base!==i:!x(s,i))return!0}return n.length!==Object.keys(t).length}function H(e){var t=e.draft;if(t.length!==e.base.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var Q=function(e){if(!e)throw new Error("Map is not polyfilled");function t(e,t){return this[l]={type:a.Map,parent:t,scope:t?t.scope:S.current,modified:!1,finalized:!1,copy:void 0,assigned:void 0,base:e,draft:this,isManual:!1,revoked:!1},this}d(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return E(this[l]).size},enumerable:!0,configurable:!0}),r.has=function(e){return E(this[l]).has(e)},r.set=function(e,t){var r=this[l];return Z(r),E(r).get(e)!==t&&(Y(r),r.scope.immer.markChanged(r),r.assigned.set(e,!0),r.copy.set(e,t),r.assigned.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[l];return Z(t),Y(t),t.scope.immer.markChanged(t),t.assigned.set(e,!1),t.copy.delete(e),!0},r.clear=function(){var e=this[l];return Z(e),Y(e),e.scope.immer.markChanged(e),e.assigned=new Map,e.copy.clear()},r.forEach=function(e,t){var r=this;E(this[l]).forEach((function(n,o,a){e.call(t,r.get(o),o,r)}))},r.get=function(e){var t=this[l];Z(t);var r=E(t).get(e);if(t.finalized||!g(r))return r;if(r!==t.base.get(e))return r;var n=t.scope.immer.createProxy(r,t);return Y(t),t.copy.set(e,n),n},r.keys=function(){return E(this[l]).keys()},r.values=function(){var e,t=this,r=this.keys();return(e={})[h]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,r=this.keys();return(e={})[h]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},r[h]=function(){return this.entries()},t}(Map);function Y(e){e.copy||(e.assigned=new Map,e.copy=new Map(e.base))}var ee=function(e){if(!e)throw new Error("Set is not polyfilled");function t(e,t){return this[l]={type:a.Set,parent:t,scope:t?t.scope:S.current,modified:!1,finalized:!1,copy:void 0,base:e,draft:this,drafts:new Map,revoked:!1,isManual:!1},this}d(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return E(this[l]).size},enumerable:!0,configurable:!0}),r.has=function(e){var t=this[l];return Z(t),t.copy?!!t.copy.has(e)||!(!t.drafts.has(e)||!t.copy.has(t.drafts.get(e))):t.base.has(e)},r.add=function(e){var t=this[l];return Z(t),t.copy?t.copy.add(e):t.base.has(e)||(te(t),t.scope.immer.markChanged(t),t.copy.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[l];return Z(t),te(t),t.scope.immer.markChanged(t),t.copy.delete(e)||!!t.drafts.has(e)&&t.copy.delete(t.drafts.get(e))},r.clear=function(){var e=this[l];return Z(e),te(e),e.scope.immer.markChanged(e),e.copy.clear()},r.values=function(){var e=this[l];return Z(e),te(e),e.copy.values()},r.entries=function(){var e=this[l];return Z(e),te(e),e.copy.entries()},r.keys=function(){return this.values()},r[h]=function(){return this.values()},r.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}(Set);function te(e){e.copy||(e.copy=new Set,e.base.forEach((function(t){if(g(t)){var r=e.scope.immer.createProxy(t,e);e.drafts.set(t,r),e.copy.add(r)}else e.copy.add(t)})))}function re(e,t){return t.forEach((function(t){var r=t.path,n=t.op;r.length||D();for(var a=e,i=0;i<r.length-1;i++)if(!(a=O(a,r[i]))||"object"!=typeof a)throw new Error("Cannot apply patch, path doesn't resolve: "+r.join("/"));var s=b(a),c=ne(t.value),f=r[r.length-1];switch(n){case"replace":switch(s){case o.Map:return a.set(f,c);case o.Set:throw new Error('Sets cannot have "replace" patches.');default:return a[f]=c}case"add":switch(s){case o.Array:return a.splice(f,0,c);case o.Map:return a.set(f,c);case o.Set:return a.add(c);default:return a[f]=c}case"remove":switch(s){case o.Array:return a.splice(f,1);case o.Map:return a.delete(f);case o.Set:return a.delete(t.value);default:return delete a[f]}default:throw new Error("Unsupported patch operation: "+n)}})),e}function ne(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(ne);if(P(e))return new Map(Array.from(e.entries()).map((function(e){return[e[0],ne(e[1])]})));if(j(e))return new Set(Array.from(e).map(ne));var t=Object.create(Object.getPrototypeOf(e));for(var r in e)t[r]=ne(e[r]);return t}function oe(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)n[o]=a[i];return n}var ae={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:void 0===e&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},ie=new(function(){function e(e){var t=this;this.useProxies=!1,this.autoFreeze=!1,m(ae,(function(r,n){var o,a;t[r]=null!=(a=null===(o=e)||void 0===o?void 0:o[r])?a:n})),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}return e.prototype.produce=function(e,t,r){var n,o=this;if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var i=this;return function(e){var r=arguments,n=this;void 0===e&&(e=a);for(var o=[],s=1;s<arguments.length;s++)o[s-1]=r[s];return i.produce(e,(function(e){return t.call.apply(t,oe([n,e],o))}))}}if("function"!=typeof t)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==r&&"function"!=typeof r)throw new Error("The third argument to `produce` must be a function or undefined");if(g(e)){var s=S.enter(this),c=this.createProxy(e,void 0),u=!0;try{n=t(c),u=!1}finally{u?s.revoke():s.leave()}return"undefined"!=typeof Promise&&n instanceof Promise?n.then((function(e){return s.usePatches(r),_(o,e,s)}),(function(e){throw s.revoke(),e})):(s.usePatches(r),_(this,n,s))}if((n=t(e))!==f)return void 0===n&&(n=e),B(this,n,!0),n},e.prototype.produceWithPatches=function(e,t,r){var n,o,a=this;return"function"==typeof e?function(t){for(var r=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=r[o];return a.produceWithPatches(t,(function(t){return e.apply(void 0,oe([t],n))}))}:(r&&D(),[this.produce(e,t,(function(e,t){n=e,o=t})),n,o])},e.prototype.createDraft=function(e){if(!g(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=S.enter(this),r=this.createProxy(e,void 0);return r[l].isManual=!0,t.leave(),r},e.prototype.finishDraft=function(e,t){var r=e&&e[l];if(!r||!r.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(r.finalized)throw new Error("The given draft is already finalized");var n=r.scope;return n.usePatches(t),_(this,void 0,n)},e.prototype.setAutoFreeze=function(e){this.autoFreeze=e},e.prototype.setUseProxies=function(e){this.useProxies=e},e.prototype.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}return v(e)?re(e,t):this.produce(e,(function(e){return re(e,t.slice(r+1))}))},e.prototype.createProxy=function(e,t){var r=P(e)?function(e,t){return new Q(e,t)}(e,t):j(e)?function(e,t){return new ee(e,t)}(e,t):this.useProxies?function(e,t){var r=Array.isArray(e),n={type:r?a.ProxyArray:a.ProxyObject,scope:t?t.scope:S.current,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null,isManual:!1},o=n,i=R;r&&(o=[n],i=z);var s=Proxy.revocable(o,i),c=s.revoke,f=s.proxy;return n.draft=f,n.revoke=c,f}(e,t):L(e,t);return(t?t.scope:S.current).drafts.push(r),r},e.prototype.willFinalize=function(e,t,r){this.useProxies||W(e,t,r)},e.prototype.markChanged=function(e){this.useProxies?q(e):J(e)},e}()),se=ie.produce,ce=(ie.produceWithPatches.bind(ie),ie.setAutoFreeze.bind(ie),ie.setUseProxies.bind(ie),ie.applyPatches.bind(ie),ie.createDraft.bind(ie)),fe=ie.finishDraft.bind(ie)}).call(this,r(5))},function(e,t,r){(function(e,n){var o;!function(a){var i=t,s=(e&&e.exports,"object"==typeof n&&n);s.global!==s&&s.window;var c=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,f=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,u=function(e){for(var t="",r=(e=e.replace(c,(function(e,t,r){return u(r)+t})).replace(f,"$2$1")).length;r--;)t+=e.charAt(r);return t},l={version:"0.2.0",reverse:u};void 0===(o=function(){return l}.call(t,r,t,e))||(e.exports=o)}()}).call(this,r(3)(e),r(4))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(6),t.X="TEST"},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r,n,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,f=[],u=!1,l=-1;function h(){u&&c&&(u=!1,c.length?f=c.concat(f):l=-1,f.length&&p())}function p(){if(!u){var e=s(h);u=!0;for(var t=f.length;t;){for(c=f,f=[];++l<t;)c&&c[l].run();l=-1,t=f.length}c=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new d(e,t)),1!==f.length||u||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";function n(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}function o(e){var t,r;return!1!==n(e)&&("function"==typeof(t=e.constructor)&&(!1!==n(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}r.r(t),r.d(t,"Editor",(function(){return S})),r.d(t,"Element",(function(){return C})),r.d(t,"Location",(function(){return _})),r.d(t,"Node",(function(){return T})),r.d(t,"Operation",(function(){return z})),r.d(t,"Path",(function(){return M})),r.d(t,"PathRef",(function(){return q})),r.d(t,"Point",(function(){return W})),r.d(t,"PointRef",(function(){return L})),r.d(t,"Range",(function(){return J})),r.d(t,"RangeRef",(function(){return U})),r.d(t,"Span",(function(){return N})),r.d(t,"Text",(function(){return Z})),r.d(t,"Transforms",(function(){return ae})),r.d(t,"createEditor",(function(){return g}));var a=r(0),i=r(1);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=new WeakMap,f=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,p=new WeakMap;function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=()=>{var e={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:t=>{for(var r of S.pathRefs(e))q.transform(r,t);for(var n of S.pointRefs(e))L.transform(n,t);for(var o of S.rangeRefs(e))U.transform(o,t);var a=new Set,i=[],s=e=>{if(e){var t=e.join(",");a.has(t)||(a.add(t),i.push(e))}},u=c.get(e)||[],l=y(t);for(var h of u){s(M.transform(h,t))}for(var p of l)s(p);c.set(e,i),S.transform(e,t),e.operations.push(t),S.normalize(e),"set_selection"===t.type&&(e.marks=null),f.get(e)||(f.set(e,!0),Promise.resolve().then(()=>{f.set(e,!1),e.onChange(),e.operations=[]}))},addMark:(t,r)=>{var{selection:n}=e;if(n)if(J.isExpanded(n))ae.setNodes(e,{[t]:r},{match:Z.isText,split:!0});else{var o=v({},S.marks(e)||{},{[t]:r});e.marks=o,e.onChange()}},deleteBackward:t=>{var{selection:r}=e;r&&J.isCollapsed(r)&&ae.delete(e,{unit:t,reverse:!0})},deleteForward:t=>{var{selection:r}=e;r&&J.isCollapsed(r)&&ae.delete(e,{unit:t})},deleteFragment:()=>{var{selection:t}=e;t&&J.isExpanded(t)&&ae.delete(e)},insertBreak:()=>{ae.splitNodes(e,{always:!0})},insertFragment:t=>{ae.insertFragment(e,t)},insertNode:t=>{ae.insertNodes(e,t)},insertText:t=>{var{selection:r,marks:n}=e;if(r){if(J.isCollapsed(r)){var o=S.above(e,{match:t=>S.isInline(e,t),mode:"highest"});if(o){var[,a]=o;if(S.isEnd(e,r.anchor,a)){var i=S.after(e,a);ae.setSelection(e,{anchor:i,focus:i})}}}if(n){var s=v({text:t},n);ae.insertNodes(e,s)}else ae.insertText(e,t);e.marks=null}},normalizeNode:t=>{var[r,n]=t;if(!Z.isText(r))if(C.isElement(r)&&0===r.children.length){ae.insertNodes(e,{text:""},{at:n.concat(0),voids:!0})}else for(var o=!S.isEditor(r)&&(C.isElement(r)&&(e.isInline(r)||0===r.children.length||Z.isText(r.children[0])||e.isInline(r.children[0]))),a=0,i=0;i<r.children.length;i++,a++){var s=r.children[i],c=r.children[i-1],f=i===r.children.length-1;if((Z.isText(s)||C.isElement(s)&&e.isInline(s))!==o)ae.removeNodes(e,{at:n.concat(a),voids:!0}),a--;else if(C.isElement(s)){if(e.isInline(s))if(null!=c&&Z.isText(c)){if(f){ae.insertNodes(e,{text:""},{at:n.concat(a+1),voids:!0}),a++}}else{ae.insertNodes(e,{text:""},{at:n.concat(a),voids:!0}),a++}}else null!=c&&Z.isText(c)&&(Z.equals(s,c,{loose:!0})?(ae.mergeNodes(e,{at:n.concat(a),voids:!0}),a--):""===c.text?(ae.removeNodes(e,{at:n.concat(a-1),voids:!0}),a--):f&&""===s.text&&(ae.removeNodes(e,{at:n.concat(a),voids:!0}),a--))}},removeMark:t=>{var{selection:r}=e;if(r)if(J.isExpanded(r))ae.unsetNodes(e,t,{match:Z.isText,split:!0});else{var n=v({},S.marks(e)||{});delete n[t],e.marks=n,e.onChange()}}};return e},y=e=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":var{path:t}=e;return M.levels(t);case"insert_node":var{node:r,path:n}=e;return[...M.levels(n),...Z.isText(r)?[]:Array.from(T.nodes(r),e=>{var[,t]=e;return n.concat(t)})];case"merge_node":var{path:o}=e;return[...M.ancestors(o),M.previous(o)];case"move_node":var{path:a,newPath:i}=e;if(M.equals(a,i))return[];var s=[],c=[];for(var f of M.ancestors(a)){var u=M.transform(f,e);s.push(u)}for(var l of M.ancestors(i)){var h=M.transform(l,e);c.push(h)}return[...s,...c];case"remove_node":var{path:p}=e;return[...M.ancestors(p)];case"split_node":var{path:d}=e;return[...M.levels(d),M.next(d)];default:return[]}};function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var b=/\s/,w=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,O=/['\u2018\u2019]/,x=e=>{for(var t=0,r=null,n=e.charCodeAt(0);n;)if(j(n)){var o=E(n,e,t);if("SURR"===r||"BMP"===r)break;t+=2,r=o?"MOD":"SURR",n=e.charCodeAt(t)}else if(8205!==n)if(A(n)){if(r&&"ZWJ"!==r&&"VAR"!==r)break;t+=1,r="BMP",n=e.charCodeAt(t)}else{if(!F(n)){if("MOD"===r){t+=1;break}break}if(r&&"ZWJ"!==r)break;t+=1,r="VAR",n=e.charCodeAt(t)}else t+=1,r="ZWJ",n=e.charCodeAt(t);return t||1},P=(e,t)=>{if(b.test(e))return!1;if(O.test(e)){var r=t.charAt(0),n=x(r);r=t.slice(0,n);var o=t.slice(n);if(P(r,o))return!0}return!w.test(e)},j=e=>55296<=e&&e<=57343,E=(e,t,r)=>{if(55356===e){var n=t.charCodeAt(r+1);return n<=57343&&n>=57339}return!1},F=e=>e<=65039&&e>=65024,A=e=>10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e;function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S={above(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:r=!1,mode:n="lowest",at:o=e.selection,match:a}=t;if(o){var i=S.path(e,o),s="lowest"===n;for(var[c,f]of S.levels(e,{at:i,voids:r,match:a,reverse:s}))if(!Z.isText(c)&&!M.equals(i,f))return[c,f]}},addMark(e,t,r){e.addMark(t,r)},after(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:S.point(e,t,{edge:"end"}),focus:S.end(e,[])},{distance:a=1}=n,i=0;for(var s of S.positions(e,D({},n,{at:o}))){if(i>a)break;0!==i&&(r=s),i++}return r},before(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:S.start(e,[]),focus:S.point(e,t,{edge:"start"})},{distance:a=1}=n,i=0;for(var s of S.positions(e,D({},n,{at:o,reverse:!0}))){if(i>a)break;0!==i&&(r=s),i++}return r},deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteBackward(r)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteForward(r)},deleteFragment(e){e.deleteFragment()},edges:(e,t)=>[S.start(e,t),S.end(e,t)],end:(e,t)=>S.point(e,t,{edge:"end"}),first(e,t){var r=S.path(e,t,{edge:"start"});return S.node(e,r)},fragment(e,t){var r=S.range(e,t);return T.fragment(e,r)},hasBlocks:(e,t)=>t.children.some(t=>S.isBlock(e,t)),hasInlines:(e,t)=>t.children.some(t=>Z.isText(t)||S.isInline(e,t)),hasTexts:(e,t)=>t.children.every(e=>Z.isText(e)),insertBreak(e){e.insertBreak()},insertFragment(e,t){e.insertFragment(t)},insertNode(e,t){e.insertNode(t)},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>C.isElement(t)&&!e.isInline(t),isEditor:e=>o(e)&&"function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||o(e.marks))&&(null===e.selection||J.isRange(e.selection))&&T.isNodeList(e.children)&&z.isOperationList(e.operations),isEnd(e,t,r){var n=S.end(e,r);return W.equals(t,n)},isEdge:(e,t,r)=>S.isStart(e,t,r)||S.isEnd(e,t,r),isEmpty(e,t){var{children:r}=t,[n]=r;return 0===r.length||1===r.length&&Z.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:(e,t)=>C.isElement(t)&&e.isInline(t),isNormalizing(e){var t=u.get(e);return void 0===t||t},isStart(e,t,r){if(0!==t.offset)return!1;var n=S.start(e,r);return W.equals(t,n)},isVoid:(e,t)=>C.isElement(t)&&e.isVoid(t),last(e,t){var r=S.path(e,t,{edge:"end"});return S.node(e,r)},leaf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S.path(e,t,r);return[T.leaf(e,n),n]},*levels(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,reverse:n=!1,voids:o=!1}=t,{match:a}=t;if(null==a&&(a=()=>!0),r){var i=[],s=S.path(e,r);for(var[c,f]of T.levels(e,s))if(a(c)&&(i.push([c,f]),!o&&S.isVoid(e,c)))break;n&&i.reverse(),yield*i}},marks(e){var{marks:t,selection:r}=e;if(!r)return null;if(t)return t;if(J.isExpanded(r)){var[n]=S.nodes(e,{match:Z.isText});if(n){var[o]=n;return m(o,["text"])}return{}}var{anchor:a}=r,{path:i}=a,[s]=S.leaf(e,i);if(0===a.offset){var c=S.previous(e,{at:i,match:Z.isText}),f=S.above(e,{match:t=>S.isBlock(e,t)});if(c&&f){var[u,l]=c,[,h]=f;M.isAncestor(h,l)&&(s=u)}}return m(s,["text"])},next(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:o,at:a=e.selection}=t;if(a){var[,i]=S.last(e,a),[,s]=S.last(e,[]),c=[i,s];if(M.isPath(a)&&0===a.length)throw new Error("Cannot get the next node from the root node!");if(null==o)if(M.isPath(a)){var[f]=S.parent(e,a);o=e=>f.children.includes(e)}else o=()=>!0;var[,u]=S.nodes(e,{at:c,match:o,mode:r,voids:n});return u}},node(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S.path(e,t,r);return[T.get(e,n),n]},*nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,mode:n="all",universal:o=!1,reverse:a=!1,voids:i=!1}=t,{match:s}=t;if(s||(s=()=>!0),r){var c,f;if(N.isSpan(r))c=r[0],f=r[1];else{var u=S.path(e,r,{edge:"start"}),l=S.path(e,r,{edge:"end"});c=a?l:u,f=a?u:l}var h,p=T.nodes(e,{reverse:a,from:c,to:f,pass:t=>{var[r]=t;return!i&&S.isVoid(e,r)}}),d=[];for(var[v,g]of p){var y=h&&0===M.compare(g,h[1]);if("highest"!==n||!y)if(s(v))if("lowest"===n&&y)h=[v,g];else{var m="lowest"===n?h:[v,g];m&&(o?d.push(m):yield m),h=[v,g]}else if(o&&!y&&Z.isText(v))return}"lowest"===n&&h&&(o?d.push(h):yield h),o&&(yield*d)}},normalize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:r=!1}=t,n=e=>c.get(e)||[];if(S.isNormalizing(e)){if(r){var o=Array.from(T.nodes(e),e=>{var[,t]=e;return t});c.set(e,o)}0!==n(e).length&&S.withoutNormalizing(e,()=>{for(var t=42*n(e).length,r=0;0!==n(e).length;){if(r>t)throw new Error("\n            Could not completely normalize the editor after ".concat(t," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var o=n(e).pop(),a=S.node(e,o);e.normalizeNode(a),r++}})}},parent(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S.path(e,t,r),o=M.parent(n);return S.node(e,o)},path(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:n,edge:o}=r;if(M.isPath(t))if("start"===o){var[,a]=T.first(e,t);t=a}else if("end"===o){var[,i]=T.last(e,t);t=i}return J.isRange(t)&&(t="start"===o?J.start(t):"end"===o?J.end(t):M.common(t.anchor.path,t.focus.path)),W.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},pathRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return S.pathRefs(e).delete(o),o.current=null,t}};return S.pathRefs(e).add(o),o},pathRefs(e){var t=l.get(e);return t||(t=new Set,l.set(e,t)),t},point(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:n="start"}=r;if(M.isPath(t)){var o;if("end"===n){var[,a]=T.last(e,t);o=a}else{var[,i]=T.first(e,t);o=i}var s=T.get(e,o);if(!Z.isText(s))throw new Error("Cannot get the ".concat(n," point in the node at path [").concat(t,"] because it has no ").concat(n," text node."));return{path:o,offset:"end"===n?s.text.length:0}}if(J.isRange(t)){var[c,f]=J.edges(t);return"start"===n?c:f}return t},pointRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return S.pointRefs(e).delete(o),o.current=null,t}};return S.pointRefs(e).add(o),o},pointRefs(e){var t=h.get(e);return t||(t=new Set,h.set(e,t)),t},*positions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,unit:n="offset",reverse:o=!1}=t;if(r){var a=S.range(e,r),[s,c]=J.edges(a),f=o?c:s,u="",l=0,h=0,p=null,d=!1,v=()=>{null==p&&(p="character"===n?x(u):"word"===n?(e=>{for(var t,r=0,n=0,o=!1;t=e.charAt(n);){var a=x(t);t=e.slice(n,n+a);var i=e.slice(n+a);if(P(t,i))o=!0,r+=a;else{if(o)break;r+=a}n+=a}return r})(u):"line"===n||"block"===n?u.length:1,u=u.slice(p)),h=o?h-p:h+p,p=(l-=p)>=0?null:0-l};for(var[g,y]of S.nodes(e,{at:r,reverse:o})){if(C.isElement(g)){if(e.isVoid(g)){yield S.start(e,y);continue}if(e.isInline(g))continue;if(S.hasInlines(e,g)){var m=M.isAncestor(y,c.path)?c:S.end(e,y),b=M.isAncestor(y,s.path)?s:S.start(e,y),w=S.string(e,{anchor:b,focus:m});u=o?Object(i.reverse)(w):w,d=!0}}if(Z.isText(g)){var O=M.equals(y,f.path);for(l=g.text.length,h=o?l:0,O&&(l=o?f.offset:l-f.offset,h=f.offset),(O||d||"offset"===n)&&(yield{path:y,offset:h});""!==u&&(v(),l>=0);)yield{path:y,offset:h};d=!1}}}},previous(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:o,at:a=e.selection}=t;if(a){var[,i]=S.first(e,a),[,s]=S.first(e,[]),c=[i,s];if(M.isPath(a)&&0===a.length)throw new Error("Cannot get the previous node from the root node!");if(null==o)if(M.isPath(a)){var[f]=S.parent(e,a);o=e=>f.children.includes(e)}else o=()=>!0;var[,u]=S.nodes(e,{reverse:!0,at:c,match:o,mode:r,voids:n});return u}},range:(e,t,r)=>J.isRange(t)&&!r?t:{anchor:S.start(e,t),focus:S.end(e,r||t)},rangeRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return S.rangeRefs(e).delete(o),o.current=null,t}};return S.rangeRefs(e).add(o),o},rangeRefs(e){var t=p.get(e);return t||(t=new Set,p.set(e,t)),t},removeMark(e,t){e.removeMark(t)},start:(e,t)=>S.point(e,t,{edge:"start"}),string(e,t){var r=S.range(e,t),[n,o]=J.edges(r),a="";for(var[i,s]of S.nodes(e,{at:r,match:Z.isText})){var c=i.text;M.equals(s,o.path)&&(c=c.slice(0,o.offset)),M.equals(s,n.path)&&(c=c.slice(n.offset)),a+=c}return a},transform(e,t){e.children=Object(a.a)(e.children);var r=e.selection&&Object(a.a)(e.selection);switch(t.type){case"insert_node":var{path:n,node:o}=t,i=T.parent(e,n),s=n[n.length-1];if(i.children.splice(s,0,o),r)for(var[c,f]of J.points(r))r[f]=W.transform(c,t);break;case"insert_text":var{path:u,offset:l,text:h}=t,p=T.leaf(e,u),d=p.text.slice(0,l),v=p.text.slice(l);if(p.text=d+h+v,r)for(var[g,y]of J.points(r))r[y]=W.transform(g,t);break;case"merge_node":var{path:m}=t,b=T.get(e,m),w=M.previous(m),O=T.get(e,w),x=T.parent(e,m),P=m[m.length-1];if(Z.isText(b)&&Z.isText(O))O.text+=b.text;else{if(Z.isText(b)||Z.isText(O))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(m,"] to nodes of different interaces: ").concat(b," ").concat(O));O.children.push(...b.children)}if(x.children.splice(P,1),r)for(var[j,E]of J.points(r))r[E]=W.transform(j,t);break;case"move_node":var{path:F,newPath:A}=t;if(M.isAncestor(F,A))throw new Error("Cannot move a path [".concat(F,"] to new path [").concat(A,"] because the destination is inside itself."));var k=T.get(e,F),S=T.parent(e,F),C=F[F.length-1];S.children.splice(C,1);var _=M.transform(F,t),N=T.get(e,M.parent(_)),B=_[_.length-1];if(N.children.splice(B,0,k),r)for(var[R,z]of J.points(r))r[z]=W.transform(R,t);break;case"remove_node":var{path:q}=t,I=q[q.length-1];if(T.parent(e,q).children.splice(I,1),r)for(var[L,V]of J.points(r)){var U=W.transform(L,t);if(null!=r&&null!=U)r[V]=U;else{var K=void 0,$=void 0;for(var[X,G]of T.texts(e)){if(-1!==M.compare(G,q)){$=[X,G];break}K=[X,G]}K?(L.path=K[1],L.offset=K[0].text.length):$?(L.path=$[1],L.offset=0):r=null}}break;case"remove_text":var{path:H,offset:Q,text:Y}=t,ee=T.leaf(e,H),te=ee.text.slice(0,Q),re=ee.text.slice(Q+Y.length);if(ee.text=te+re,r)for(var[ne,oe]of J.points(r))r[oe]=W.transform(ne,t);break;case"set_node":var{path:ae,newProperties:ie}=t;if(0===ae.length)throw new Error("Cannot set properties on the root node!");var se=T.get(e,ae);for(var ce in ie){if("children"===ce||"text"===ce)throw new Error('Cannot set the "'.concat(ce,'" property of nodes!'));var fe=ie[ce];null==fe?delete se[ce]:se[ce]=fe}break;case"set_selection":var{newProperties:ue}=t;if(null==ue)r=ue;else if(null==r){if(!J.isRange(ue))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(ue)," when there is no current selection."));r=ue}else Object.assign(r,ue);break;case"split_node":var{path:le,position:he,properties:pe}=t;if(0===le.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(le,"] because the root node cannot be split."));var de,ve=T.get(e,le),ge=T.parent(e,le),ye=le[le.length-1];if(Z.isText(ve)){var me=ve.text.slice(0,he),be=ve.text.slice(he);ve.text=me,de=D({},ve,{},pe,{text:be})}else{var we=ve.children.slice(0,he),Oe=ve.children.slice(he);ve.children=we,de=D({},ve,{},pe,{children:Oe})}if(ge.children.splice(ye+1,0,de),r)for(var[xe,Pe]of J.points(r))r[Pe]=W.transform(xe,t)}e.children=Object(a.b)(e.children),e.selection=r?Object(a.c)(r)?Object(a.b)(r):r:null},unhangRange(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,[o,a]=J.edges(t);if(0!==o.offset||0!==a.offset||J.isCollapsed(t))return t;var i=S.above(e,{at:a,match:t=>S.isBlock(e,t)}),s=i?i[1]:[],c={anchor:S.start(e,[]),focus:a},f=!0;for(var[u,l]of S.nodes(e,{at:c,match:Z.isText,reverse:!0,voids:n}))if(f)f=!1;else if(""!==u.text||M.isBefore(l,s)){a={path:l,offset:u.text.length};break}return{anchor:o,focus:a}},void(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S.above(e,D({},t,{match:t=>S.isVoid(e,t)}))},withoutNormalizing(e,t){var r=S.isNormalizing(e);u.set(e,!1),t(),u.set(e,r),S.normalize(e)}},C={isElement:e=>o(e)&&T.isNodeList(e.children)&&!S.isEditor(e),isElementList:e=>Array.isArray(e)&&(0===e.length||C.isElement(e[0])),matches(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},_={isLocation:e=>M.isPath(e)||W.isPoint(e)||J.isRange(e)},N={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(M.isPath)},T={ancestor(e,t){var r=T.get(e,t);if(Z.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},*ancestors(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of M.ancestors(t,r)){var o=[T.ancestor(e,n),n];yield o}},child(e,t){if(Z.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},*children(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{reverse:n=!1}=r,o=T.ancestor(e,t),{children:a}=o,i=n?a.length-1:0;n?i>=0:i<a.length;){var s=T.child(o,i),c=t.concat(i);yield[s,c],i=n?i-1:i+1}},common(e,t,r){var n=M.common(t,r);return[T.get(e,n),n]},descendant(e,t){var r=T.get(e,t);if(S.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},*descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of T.nodes(e,t))0!==n.length&&(yield[r,n])},*elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of T.nodes(e,t))C.isElement(r)&&(yield[r,n])},first(e,t){for(var r=t.slice(),n=T.get(e,r);n&&!Z.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment(e,t){if(Z.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return Object(a.d)(e,e=>{var[r,n]=J.edges(t),o=T.nodes(e,{reverse:!0,pass:e=>{var[,r]=e;return!J.includes(t,r)}});for(var[,a]of o){if(!J.includes(t,a)){var i=T.parent(e,a),s=a[a.length-1];i.children.splice(s,1)}if(M.equals(a,n.path)){var c=T.leaf(e,a);c.text=c.text.slice(0,n.offset)}if(M.equals(a,r.path)){var f=T.leaf(e,a);f.text=f.text.slice(r.offset)}}delete e.selection}).children},get(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Z.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Z.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:e=>Z.isText(e)||C.isElement(e)||S.isEditor(e),isNodeList:e=>Array.isArray(e)&&(0===e.length||T.isNode(e[0])),last(e,t){for(var r=t.slice(),n=T.get(e,r);n&&!Z.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(e,t){var r=T.get(e,t);if(!Z.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},*levels(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of M.levels(t,r)){var o=T.get(e,n);yield[o,n]}},matches:(e,t)=>C.isElement(e)&&C.matches(e,t)||Z.isText(e)&&Z.matches(e,t),*nodes(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pass:r,reverse:n=!1}=t,{from:o=[],to:a}=t,i=new Set,s=[],c=e;!a||!(n?M.isBefore(s,a):M.isAfter(s,a));)if(i.has(c)||(yield[c,s]),i.has(c)||Z.isText(c)||0===c.children.length||null!=r&&!1!==r([c,s])){if(0===s.length)break;if(!n){var f=M.next(s);if(T.has(e,f)){s=f,c=T.get(e,s);continue}}if(n&&0!==s[s.length-1])s=M.previous(s),c=T.get(e,s);else s=M.parent(s),c=T.get(e,s),i.add(c)}else{i.add(c);var u=n?c.children.length-1:0;M.isAncestor(s,o)&&(u=o[s.length]),s=s.concat(u),c=T.get(e,s)}},parent(e,t){var r=M.parent(t),n=T.get(e,r);if(Z.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:e=>Z.isText(e)?e.text:e.children.map(T.string).join(""),*texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of T.nodes(e,t))Z.isText(r)&&(yield[r,n])}};function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z={isNodeOperation:e=>z.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!o(e))return!1;switch(e.type){case"insert_node":return M.isPath(e.path)&&T.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&M.isPath(e.path);case"merge_node":return"number"==typeof e.position&&("number"==typeof e.target||null===e.target)&&M.isPath(e.path)&&o(e.properties);case"move_node":return M.isPath(e.path)&&M.isPath(e.newPath);case"remove_node":return M.isPath(e.path)&&T.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&M.isPath(e.path);case"set_node":return M.isPath(e.path)&&o(e.properties)&&o(e.newProperties);case"set_selection":return null===e.properties&&J.isRange(e.newProperties)||null===e.newProperties&&J.isRange(e.properties)||o(e.properties)&&o(e.newProperties);case"split_node":return M.isPath(e.path)&&"number"==typeof e.position&&("number"==typeof e.target||null===e.target)&&o(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&(0===e.length||z.isOperation(e[0])),isSelectionOperation:e=>z.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>z.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return R({},e,{type:"remove_node"});case"insert_text":return R({},e,{type:"remove_text"});case"merge_node":return R({},e,{type:"split_node",path:M.previous(e.path)});case"move_node":var{newPath:t,path:r}=e;return M.equals(t,r)?e:R({},e,{path:M.transform(r,e),newPath:M.transform(M.next(r),e)});case"remove_node":return R({},e,{type:"insert_node"});case"remove_text":return R({},e,{type:"insert_text"});case"set_node":var{properties:n,newProperties:o}=e;return R({},e,{properties:o,newProperties:n});case"set_selection":var{properties:a,newProperties:i}=e;return R({},e,null==a?{properties:i,newProperties:null}:null==i?{properties:null,newProperties:a}:{properties:i,newProperties:a});case"split_node":return R({},e,{type:"merge_node",path:M.next(e.path)})}}},M={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=M.levels(e,t);return n=r?n.slice(1):n.slice(0,-1)},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),a=e[r],i=t[r];return M.equals(n,o)&&a>i},endsAt(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return M.equals(n,o)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),a=e[r],i=t[r];return M.equals(n,o)&&a<i},equals:(e,t)=>e.length===t.length&&e.every((e,r)=>e===t[r]),isAfter:(e,t)=>1===M.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===M.compare(e,t),isBefore:(e,t)=>-1===M.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===M.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===M.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===M.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===M.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&M.equals(r,n)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=[],o=0;o<=e.length;o++)n.push(e.slice(0,o));return r&&n.reverse(),n},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!M.isAncestor(t,e)&&!M.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.d)(e,n=>{var{affinity:o="forward"}=r;if(0!==e.length)switch(t.type){case"insert_node":var{path:a}=t;(M.equals(a,n)||M.endsBefore(a,n)||M.isAncestor(a,n))&&(n[a.length-1]+=1);break;case"remove_node":var{path:i}=t;if(M.equals(i,n)||M.isAncestor(i,n))return null;M.endsBefore(i,n)&&(n[i.length-1]-=1);break;case"merge_node":var{path:s,position:c}=t;M.equals(s,n)||M.endsBefore(s,n)?n[s.length-1]-=1:M.isAncestor(s,n)&&(n[s.length-1]-=1,n[s.length]+=c);break;case"split_node":var{path:f,position:u}=t;if(M.equals(f,n)){if("forward"===o)n[n.length-1]+=1;else if("backward"!==o)return null}else M.endsBefore(f,n)?n[f.length-1]+=1:M.isAncestor(f,n)&&e[f.length]>=u&&(n[f.length-1]+=1,n[f.length]-=u);break;case"move_node":var{path:l,newPath:h}=t;if(M.equals(l,h))return;if(M.isAncestor(l,n)||M.equals(l,n)){var p=h.slice();if(M.endsBefore(l,h)&&l.length<h.length)p[Math.min(h.length,l.length)-1]-=1;return p.concat(n.slice(l.length))}M.endsBefore(h,n)||M.equals(h,n)||M.isAncestor(h,n)?(M.endsBefore(l,n)&&(n[l.length-1]-=1),n[h.length-1]+=1):M.endsBefore(l,n)&&(M.equals(h,n)&&(n[h.length-1]+=1),n[l.length-1]-=1)}})}},q={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=M.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var W={compare(e,t){var r=M.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:(e,t)=>1===W.compare(e,t),isBefore:(e,t)=>-1===W.compare(e,t),equals:(e,t)=>e.offset===t.offset&&M.equals(e.path,t.path),isPoint:e=>o(e)&&"number"==typeof e.offset&&M.isPath(e.path),transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.d)(e,e=>{var{affinity:n="forward"}=r,{path:o,offset:a}=e;switch(t.type){case"insert_node":case"move_node":e.path=M.transform(o,t,r);break;case"insert_text":M.equals(t.path,o)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":M.equals(t.path,o)&&(e.offset+=t.position),e.path=M.transform(o,t,r);break;case"remove_text":M.equals(t.path,o)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(M.equals(t.path,o)||M.isAncestor(t.path,o))return null;e.path=M.transform(o,t,r);break;case"split_node":if(M.equals(t.path,o)){if(t.position===a&&null==n)return null;(t.position<a||t.position===a&&"forward"===n)&&(e.offset-=t.position,e.path=M.transform(o,t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{affinity:"forward"})))}else e.path=M.transform(o,t,r)}})}},L={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=W.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var J={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,{anchor:n,focus:o}=e;return J.isBackward(e)===r?[n,o]:[o,n]},end(e){var[,t]=J.edges(e);return t},equals:(e,t)=>W.equals(e.anchor,t.anchor)&&W.equals(e.focus,t.focus),includes(e,t){if(J.isRange(t)){if(J.includes(e,t.anchor)||J.includes(e,t.focus))return!0;var[r,n]=J.edges(e),[o,a]=J.edges(t);return W.isBefore(r,o)&&W.isAfter(n,a)}var[i,s]=J.edges(e),c=!1,f=!1;return W.isPoint(t)?(c=W.compare(t,i)>=0,f=W.compare(t,s)<=0):(c=M.compare(t,i.path)>=0,f=M.compare(t,s.path)<=0),c&&f},intersection(e,t){var r=m(e,["anchor","focus"]),[n,o]=J.edges(e),[a,i]=J.edges(t),c=W.isBefore(n,a)?a:n,f=W.isBefore(o,i)?o:i;return W.isBefore(f,c)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:c,focus:f},r)},isBackward(e){var{anchor:t,focus:r}=e;return W.isAfter(t,r)},isCollapsed(e){var{anchor:t,focus:r}=e;return W.equals(t,r)},isExpanded:e=>!J.isCollapsed(e),isForward:e=>!J.isBackward(e),isRange:e=>o(e)&&W.isPoint(e.anchor)&&W.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=J.edges(e);return t},transform(e,t,r){var n,o,{affinity:i="inward"}=r;return"inward"===i?J.isForward(e)?(n="forward",o="backward"):(n="backward",o="forward"):"outward"===i?J.isForward(e)?(n="backward",o="forward"):(n="forward",o="backward"):(n=i,o=i),Object(a.d)(e,e=>{var r=W.transform(e.anchor,t,{affinity:n}),a=W.transform(e.focus,t,{affinity:o});if(!r||!a)return null;e.anchor=r,e.focus=a})}},U={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=J.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z={equals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:n=!1}=r;for(var o in e)if((!n||"text"!==o)&&e[o]!==t[o])return!1;for(var a in t)if((!n||"text"!==a)&&e[a]!==t[a])return!1;return!0},isText:e=>o(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&(0===e.length||Z.isText(e[0])),matches(e,t){for(var r in t)if("text"!==r&&e[r]!==t[r])return!1;return!0},decorations(e,t){var r=[$({},e)];for(var n of t){var o=m(n,["anchor","focus"]),[a,i]=J.edges(n),s=[],c=0;for(var f of r){var{length:u}=f.text,l=c;if(c+=u,a.offset<=l&&i.offset>=l+u)Object.assign(f,o),s.push(f);else if(a.offset>l+u||i.offset<l||i.offset===l&&0!==l)s.push(f);else{var h=f,p=void 0,d=void 0;if(i.offset<l+u){var v=i.offset-l;d=$({},h,{text:h.text.slice(v)}),h=$({},h,{text:h.text.slice(0,v)})}if(a.offset>l){var g=a.offset-l;p=$({},h,{text:h.text.slice(0,g)}),h=$({},h,{text:h.text.slice(g)})}Object.assign(h,o),p&&s.push(p),s.push(h),d&&s.push(d)}}r=s}return r}};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y={insertNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:a="lowest"}=r,{at:i,match:s,select:c}=r;if(T.isNode(t)&&(t=[t]),0!==t.length){var[f]=t;if(i||(i=e.selection?e.selection:e.children.length>0?S.end(e,[]):[0],c=!0),null==c&&(c=!1),J.isRange(i))if(n||(i=S.unhangRange(e,i)),J.isCollapsed(i))i=i.anchor;else{var[,u]=J.edges(i),l=S.pointRef(e,u);ae.delete(e,{at:i}),i=l.unref()}if(W.isPoint(i)){null==s&&(s=Z.isText(f)?e=>Z.isText(e):e.isInline(f)?t=>Z.isText(t)||S.isInline(e,t):t=>S.isBlock(e,t));var[h]=S.nodes(e,{at:i.path,match:s,mode:a,voids:o});if(!h)return;var[,p]=h,d=S.pathRef(e,p),v=S.isEnd(e,i,p);ae.splitNodes(e,{at:i,match:s,mode:a,voids:o});var g=d.unref();i=v?M.next(g):g}var y=M.parent(i),m=i[i.length-1];if(o||!S.void(e,{at:y})){for(var b of t){var w=y.concat(m);m++,e.apply({type:"insert_node",path:w,node:b})}if(c){var O=S.end(e,i);O&&ae.select(e,O)}}}})},liftNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:n="lowest",voids:o=!1}=t,{match:a}=t;if(null==a&&(a=M.isPath(r)?te(e,r):t=>S.isBlock(e,t)),r){var i=S.nodes(e,{at:r,match:a,mode:n,voids:o}),s=Array.from(i,t=>{var[,r]=t;return S.pathRef(e,r)});for(var c of s){var f=c.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var[u,l]=S.node(e,M.parent(f)),h=f[f.length-1],{length:p}=u.children;if(1===p){var d=M.next(l);ae.moveNodes(e,{at:f,to:d,voids:o}),ae.removeNodes(e,{at:l,voids:o})}else if(0===h)ae.moveNodes(e,{at:f,to:l,voids:o});else if(h===p-1){var v=M.next(l);ae.moveNodes(e,{at:f,to:v,voids:o})}else{var g=M.next(f),y=M.next(l);ae.splitNodes(e,{at:g,voids:o}),ae.moveNodes(e,{at:f,to:y,voids:o})}}}})},mergeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{match:r,at:n=e.selection}=t,{hanging:o=!1,voids:a=!1,mode:i="lowest"}=t;if(n){if(null==r)if(M.isPath(n)){var[s]=S.parent(e,n);r=e=>s.children.includes(e)}else r=t=>S.isBlock(e,t);if(!o&&J.isRange(n)&&(n=S.unhangRange(e,n)),J.isRange(n))if(J.isCollapsed(n))n=n.anchor;else{var[,c]=J.edges(n),f=S.pointRef(e,c);ae.delete(e,{at:n}),n=f.unref(),null==t.at&&ae.select(e,n)}var[u]=S.nodes(e,{at:n,match:r,voids:a,mode:i}),l=S.previous(e,{at:n,match:r,voids:a,mode:i});if(u&&l){var[h,p]=u,[d,v]=l;if(0!==p.length&&0!==v.length){var g,y,b=M.next(v),w=M.common(p,v),O=M.isSibling(p,v),x=Array.from(S.levels(e,{at:p}),e=>{var[t]=e;return t}).slice(w.length).slice(0,-1),P=S.above(e,{at:p,mode:"highest",match:e=>x.includes(e)&&C.isElement(e)&&1===e.children.length}),j=P&&S.pathRef(e,P[1]);if(Z.isText(h)&&Z.isText(d)){var E=m(h,["text"]);y=d.text.length,g=E}else{if(!C.isElement(h)||!C.isElement(d))throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(h)," ").concat(JSON.stringify(d)));E=m(h,["children"]);y=d.children.length,g=E}O||ae.moveNodes(e,{at:p,to:b,voids:a}),j&&ae.removeNodes(e,{at:j.current,voids:a}),C.isElement(d)&&S.isEmpty(e,d)||Z.isText(d)&&""===d.text?ae.removeNodes(e,{at:v,voids:a}):e.apply({type:"merge_node",path:b,position:y,target:null,properties:g}),j&&j.unref()}}}})},moveNodes(e,t){S.withoutNormalizing(e,()=>{var{to:r,at:n=e.selection,mode:o="lowest",voids:a=!1}=t,{match:i}=t;if(n){null==i&&(i=M.isPath(n)?te(e,n):t=>S.isBlock(e,t));var s=S.pathRef(e,r),c=S.nodes(e,{at:n,match:i,mode:o,voids:a}),f=Array.from(c,t=>{var[,r]=t;return S.pathRef(e,r)});for(var u of f){var l=u.unref(),h=s.current;0!==l.length&&e.apply({type:"move_node",path:l,newPath:h})}s.unref()}})},removeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:n=!1,mode:o="lowest"}=t,{at:a=e.selection,match:i}=t;if(a){null==i&&(i=M.isPath(a)?te(e,a):t=>S.isBlock(e,t)),!r&&J.isRange(a)&&(a=S.unhangRange(e,a));var s=S.nodes(e,{at:a,match:i,mode:o,voids:n}),c=Array.from(s,t=>{var[,r]=t;return S.pathRef(e,r)});for(var f of c){var u=f.unref();if(u){var[l]=S.node(e,u);e.apply({type:"remove_node",path:u,node:l})}}}})},setNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection}=r,{hanging:a=!1,mode:i="lowest",split:s=!1,voids:c=!1}=r;if(o){if(null==n&&(n=M.isPath(o)?te(e,o):t=>S.isBlock(e,t)),!a&&J.isRange(o)&&(o=S.unhangRange(e,o)),s&&J.isRange(o)){var f=S.rangeRef(e,o,{affinity:"inward"}),[u,l]=J.edges(o),h="lowest"===i?"lowest":"highest";ae.splitNodes(e,{at:l,match:n,mode:h,voids:c}),ae.splitNodes(e,{at:u,match:n,mode:h,voids:c}),o=f.unref(),null==r.at&&ae.select(e,o)}for(var[p,d]of S.nodes(e,{at:o,match:n,mode:i,voids:c})){var v={},g={};if(0!==d.length){for(var y in t)"children"!==y&&"text"!==y&&t[y]!==p[y]&&(v[y]=p[y],g[y]=t[y]);0!==Object.keys(g).length&&e.apply({type:"set_node",path:d,properties:v,newProperties:g})}}}})},splitNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:n=!1}=t,{match:o,at:a=e.selection,height:i=0,always:s=!1}=t;if(null==o&&(o=t=>S.isBlock(e,t)),J.isRange(a)&&(a=ee(e,a)),M.isPath(a)){var c=a,f=S.point(e,c),[u]=S.parent(e,c);o=e=>e===u,i=f.path.length-c.length+1,a=f,s=!0}if(a){var l=S.pointRef(e,a,{affinity:"backward"}),[h]=S.nodes(e,{at:a,match:o,mode:r,voids:n});if(h){var p=S.void(e,{at:a,mode:"highest"});if(!n&&p){var[d,v]=p;if(C.isElement(d)&&e.isInline(d)){var g=S.after(e,v);if(!g){var y=M.next(v);ae.insertNodes(e,{text:""},{at:y,voids:n}),g=S.point(e,y)}a=g,s=!0}i=a.path.length-v.length+1,s=!0}var b=S.pointRef(e,a),w=a.path.length-i,[,O]=h,x=a.path.slice(0,w),P=0===i?a.offset:a.path[w]+0,j=null;for(var[E,F]of S.levels(e,{at:x,reverse:!0,voids:n})){var A=!1;if(F.length<O.length||0===F.length||!n&&S.isVoid(e,E))break;var k=l.current,D=S.isEnd(e,k,F);if(s||!l||!S.isEdge(e,k,F)){A=!0;var _=m(E,["text","children"]);e.apply({type:"split_node",path:F,position:P,target:j,properties:_})}j=P,P=F[F.length-1]+(A||D?1:0)}if(null==t.at){var N=b.current||S.end(e,[]);ae.select(e,N)}l.unref(),b.unref()}}})},unsetNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={};for(var o of t)n[o]=null;ae.setNodes(e,n,r)},unwrapNodes(e,t){S.withoutNormalizing(e,()=>{var{mode:r="lowest",split:n=!1,voids:o=!1}=t,{at:a=e.selection,match:i}=t;if(a){null==i&&(i=M.isPath(a)?te(e,a):t=>S.isBlock(e,t)),M.isPath(a)&&(a=S.range(e,a));var s=J.isRange(a)?S.rangeRef(e,a):null,c=S.nodes(e,{at:a,match:i,mode:r,voids:o}),f=Array.from(c,t=>{var[,r]=t;return S.pathRef(e,r)}),u=function(t){var r=t.unref(),[a]=S.node(e,r),i=S.range(e,r);n&&s&&(i=J.intersection(s.current,i)),ae.liftNodes(e,{at:i,match:e=>a.children.includes(e),voids:o})};for(var l of f)u(l);s&&s.unref()}})},wrapNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:a=!1}=r,{match:i,at:s=e.selection}=r;if(s){if(null==i&&(i=M.isPath(s)?te(e,s):e.isInline(t)?t=>S.isInline(e,t)||Z.isText(t):t=>S.isBlock(e,t)),o&&J.isRange(s)){var[c,f]=J.edges(s),u=S.rangeRef(e,s,{affinity:"inward"});ae.splitNodes(e,{at:f,match:i,voids:a}),ae.splitNodes(e,{at:c,match:i,voids:a}),s=u.unref(),null==r.at&&ae.select(e,s)}var l=Array.from(S.nodes(e,{at:s,match:e.isInline(t)?t=>S.isBlock(e,t):e=>S.isEditor(e),mode:"highest",voids:a}));for(var[,h]of l){var p=J.isRange(s)?J.intersection(s,S.range(e,h)):s;if(p){var d=Array.from(S.nodes(e,{at:p,match:i,mode:n,voids:a}));d.length>0&&function(){var[r]=d,n=d[d.length-1],[,o]=r,[,i]=n,s=M.equals(o,i)?M.parent(o):M.common(o,i),c=S.range(e,o,i),[f]=S.node(e,s),u=s.length+1,l=M.next(i.slice(0,u)),h=Q({},t,{children:[]});ae.insertNodes(e,h,{at:l,voids:a}),ae.moveNodes(e,{at:c,match:e=>f.children.includes(e),to:l.concat(0),voids:a})}()}}}})}},ee=(e,t)=>{if(J.isCollapsed(t))return t.anchor;var[,r]=J.edges(t),n=S.pointRef(e,r);return ae.delete(e,{at:t}),n.unref()},te=(e,t)=>{var[r]=S.node(e,t);return e=>e===r};function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ae=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{transform(e,t){e.children=Object(a.a)(e.children);var r=e.selection&&Object(a.a)(e.selection);switch(t.type){case"insert_node":var{path:n,node:o}=t,i=T.parent(e,n),s=n[n.length-1];if(i.children.splice(s,0,o),r)for(var[c,f]of J.points(r))r[f]=W.transform(c,t);break;case"insert_text":var{path:u,offset:l,text:h}=t,p=T.leaf(e,u),d=p.text.slice(0,l),v=p.text.slice(l);if(p.text=d+h+v,r)for(var[g,y]of J.points(r))r[y]=W.transform(g,t);break;case"merge_node":var{path:m}=t,b=T.get(e,m),w=M.previous(m),O=T.get(e,w),x=T.parent(e,m),P=m[m.length-1];if(Z.isText(b)&&Z.isText(O))O.text+=b.text;else{if(Z.isText(b)||Z.isText(O))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(m,"] to nodes of different interaces: ").concat(b," ").concat(O));O.children.push(...b.children)}if(x.children.splice(P,1),r)for(var[j,E]of J.points(r))r[E]=W.transform(j,t);break;case"move_node":var{path:F,newPath:A}=t;if(M.isAncestor(F,A))throw new Error("Cannot move a path [".concat(F,"] to new path [").concat(A,"] because the destination is inside itself."));var k=T.get(e,F),D=T.parent(e,F),S=F[F.length-1];D.children.splice(S,1);var C=M.transform(F,t),_=T.get(e,M.parent(C)),N=C[C.length-1];if(_.children.splice(N,0,k),r)for(var[B,R]of J.points(r))r[R]=W.transform(B,t);break;case"remove_node":var{path:z}=t,q=z[z.length-1];if(T.parent(e,z).children.splice(q,1),r)for(var[I,L]of J.points(r)){var V=W.transform(I,t);if(null!=r&&null!=V)r[L]=V;else{var U=void 0,K=void 0;for(var[$,X]of T.texts(e)){if(-1!==M.compare(X,z)){K=[$,X];break}U=[$,X]}U?(I.path=U[1],I.offset=U[0].text.length):K?(I.path=K[1],I.offset=0):r=null}}break;case"remove_text":var{path:H,offset:Q,text:Y}=t,ee=T.leaf(e,H),te=ee.text.slice(0,Q),re=ee.text.slice(Q+Y.length);if(ee.text=te+re,r)for(var[ne,oe]of J.points(r))r[oe]=W.transform(ne,t);break;case"set_node":var{path:ae,newProperties:ie}=t;if(0===ae.length)throw new Error("Cannot set properties on the root node!");var se=T.get(e,ae);for(var ce in ie){if("children"===ce||"text"===ce)throw new Error('Cannot set the "'.concat(ce,'" property of nodes!'));var fe=ie[ce];null==fe?delete se[ce]:se[ce]=fe}break;case"set_selection":var{newProperties:ue}=t;if(null==ue)r=ue;else if(null==r){if(!J.isRange(ue))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(ue)," when there is no current selection."));r=ue}else Object.assign(r,ue);break;case"split_node":var{path:le,position:he,properties:pe}=t;if(0===le.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(le,"] because the root node cannot be split."));var de,ve=T.get(e,le),ge=T.parent(e,le),ye=le[le.length-1];if(Z.isText(ve)){var me=ve.text.slice(0,he),be=ve.text.slice(he);ve.text=me,de=G({},ve,{},pe,{text:be})}else{var we=ve.children.slice(0,he),Oe=ve.children.slice(he);ve.children=we,de=G({},ve,{},pe,{children:Oe})}if(ge.children.splice(ye+1,0,de),r)for(var[xe,Pe]of J.points(r))r[Pe]=W.transform(xe,t)}e.children=Object(a.b)(e.children),e.selection=r?Object(a.c)(r)?Object(a.b)(r):r:null}},{},Y,{},{collapse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:r="anchor"}=t,{selection:n}=e;if(n)if("anchor"===r)ae.select(e,n.anchor);else if("focus"===r)ae.select(e,n.focus);else if("start"===r){var[o]=J.edges(n);ae.select(e,o)}else if("end"===r){var[,a]=J.edges(n);ae.select(e,a)}},deselect(e){var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e,{distance:n=1,unit:o="character",reverse:a=!1}=t,{edge:i=null}=t;if(r){"start"===i&&(i=J.isBackward(r)?"focus":"anchor"),"end"===i&&(i=J.isBackward(r)?"anchor":"focus");var{anchor:s,focus:c}=r,f={distance:n,unit:o},u={};if(null==i||"anchor"===i){var l=a?S.before(e,s,f):S.after(e,s,f);l&&(u.anchor=l)}if(null==i||"focus"===i){var h=a?S.before(e,c,f):S.after(e,c,f);h&&(u.focus=h)}ae.setSelection(e,u)}},select(e,t){var{selection:r}=e;if(t=S.range(e,t),r)ae.setSelection(e,t);else{if(!J.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint(e,t,r){var{selection:n}=e,{edge:o="both"}=r;if(n){"start"===o&&(o=J.isBackward(n)?"focus":"anchor"),"end"===o&&(o=J.isBackward(n)?"anchor":"focus");var{anchor:a,focus:i}=n,s="anchor"===o?a:i;ae.setSelection(e,{["anchor"===o?"anchor":"focus"]:ne({},s,{},t)})}},setSelection(e,t){var{selection:r}=e,n={},o={};if(r){for(var a in t)("anchor"===a&&null!=t.anchor&&!W.equals(t.anchor,r.anchor)||"focus"===a&&null!=t.focus&&!W.equals(t.focus,r.focus)||"anchor"!==a&&"focus"!==a&&t[a]!==r[a])&&(n[a]=r[a],o[a]=t[a]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}}},{},{delete(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{reverse:r=!1,unit:n="character",distance:o=1,voids:a=!1}=t,{at:i=e.selection,hanging:s=!1}=t;if(i){if(J.isRange(i)&&J.isCollapsed(i)&&(i=i.anchor),W.isPoint(i)){var c=S.void(e,{at:i,mode:"highest"});if(!a&&c){var[,f]=c;i=f}else{var u={unit:n,distance:o};i={anchor:i,focus:r?S.before(e,i,u)||S.start(e,[]):S.after(e,i,u)||S.end(e,[])},s=!0}}if(M.isPath(i))ae.removeNodes(e,{at:i,voids:a});else if(!J.isCollapsed(i)){s||(i=S.unhangRange(e,i,{voids:a}));var[l,h]=J.edges(i),p=S.above(e,{match:t=>S.isBlock(e,t),at:l,voids:a}),d=S.above(e,{match:t=>S.isBlock(e,t),at:h,voids:a}),v=p&&d&&!M.equals(p[1],d[1]),g=M.equals(l.path,h.path),y=a?null:S.void(e,{at:l,mode:"highest"}),m=a?null:S.void(e,{at:h,mode:"highest"});if(y){var b=S.before(e,l);b&&p&&M.isAncestor(p[1],b.path)&&(l=b)}if(m){var w=S.after(e,h);w&&d&&M.isAncestor(d[1],w.path)&&(h=w)}var O,x=[];for(var P of S.nodes(e,{at:i,voids:a})){var[j,E]=P;O&&0===M.compare(E,O)||(!a&&S.isVoid(e,j)||!M.isCommon(E,l.path)&&!M.isCommon(E,h.path))&&(x.push(P),O=E)}var F=Array.from(x,t=>{var[,r]=t;return S.pathRef(e,r)}),A=S.pointRef(e,l),k=S.pointRef(e,h);if(!g&&!y){var D=A.current,[C]=S.leaf(e,D),{path:_}=D,{offset:N}=l,T=C.text.slice(N);e.apply({type:"remove_text",path:_,offset:N,text:T})}for(var B of F){var R=B.unref();ae.removeNodes(e,{at:R,voids:a})}if(!m){var z=k.current,[q]=S.leaf(e,z),{path:I}=z,L=g?l.offset:0,V=q.text.slice(L,h.offset);e.apply({type:"remove_text",path:I,offset:L,text:V})}!g&&v&&k.current&&A.current&&ae.mergeNodes(e,{at:k.current,hanging:!0,voids:a});var U=k.unref()||A.unref();null==t.at&&U&&ae.select(e,U)}}})},insertFragment(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1}=r,{at:a=e.selection}=r;if(t.length&&a){if(J.isRange(a))if(n||(a=S.unhangRange(e,a)),J.isCollapsed(a))a=a.anchor;else{var[,i]=J.edges(a);if(!o&&S.void(e,{at:i}))return;var s=S.pointRef(e,i);ae.delete(e,{at:a}),a=s.unref()}else M.isPath(a)&&(a=S.start(e,a));if(o||!S.void(e,{at:a})){var c=S.above(e,{at:a,match:t=>S.isInline(e,t),mode:"highest",voids:o});if(c){var[,f]=c;if(S.isEnd(e,a,f))a=S.after(e,f);else if(S.isStart(e,a,f)){a=S.before(e,f)}}var u=S.above(e,{match:t=>S.isBlock(e,t),at:a,voids:o}),[,l]=u,h=S.isStart(e,a,l),p=S.isEnd(e,a,l),d=!h||h&&p,v=!p,[,g]=T.first({children:t},[]),[,y]=T.last({children:t},[]),m=[],b=t=>{var[r,n]=t;return!(d&&M.isAncestor(n,g)&&C.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))&&!(v&&M.isAncestor(n,y)&&C.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))};for(var w of T.nodes({children:t},{pass:b}))w[1].length>0&&b(w)&&m.push(w);var O=[],x=[],P=[],j=!0,E=!1;for(var[F]of m)C.isElement(F)&&!e.isInline(F)?(j=!1,E=!0,x.push(F)):j?O.push(F):P.push(F);var[A]=S.nodes(e,{at:a,match:t=>Z.isText(t)||S.isInline(e,t),mode:"highest",voids:o}),[,k]=A,D=S.isStart(e,a,k),_=S.isEnd(e,a,k),N=S.pathRef(e,p?M.next(l):l),B=S.pathRef(e,_?M.next(k):k);ae.splitNodes(e,{at:a,match:t=>E?S.isBlock(e,t):Z.isText(t)||S.isInline(e,t),mode:E?"lowest":"highest",voids:o});var R=S.pathRef(e,!D||D&&_?M.next(k):k);if(ae.insertNodes(e,O,{at:R.current,match:t=>Z.isText(t)||S.isInline(e,t),mode:"highest",voids:o}),ae.insertNodes(e,x,{at:N.current,match:t=>S.isBlock(e,t),mode:"lowest",voids:o}),ae.insertNodes(e,P,{at:B.current,match:t=>Z.isText(t)||S.isInline(e,t),mode:"highest",voids:o}),!r.at){var z;z=P.length>0?M.previous(B.current):x.length>0?M.previous(N.current):M.previous(R.current);var q=S.end(e,z);ae.select(e,q)}R.unref(),N.unref(),B.unref()}}})},insertText(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{voids:n=!1}=r,{at:o=e.selection}=r;if(o){if(M.isPath(o)&&(o=S.range(e,o)),J.isRange(o))if(J.isCollapsed(o))o=o.anchor;else{var a=J.end(o);if(!n&&S.void(e,{at:a}))return;var i=S.pointRef(e,a);ae.delete(e,{at:o,voids:n}),o=i.unref(),ae.setSelection(e,{anchor:o,focus:o})}if(n||!S.void(e,{at:o})){var{path:s,offset:c}=o;e.apply({type:"insert_text",path:s,offset:c,text:t})}}})}})}])}));